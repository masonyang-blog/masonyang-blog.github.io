<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¸‚å ´æ´è¦‹ (Market Insights) | Crypto Compound</title>
    <meta name="description" content="Crypto Compound å¸‚å ´æ´è¦‹ï¼šå½™æ•´æ‰€æœ‰çš„å¸‚å ´åˆ†æã€æ ¸å¿ƒè«–è¿°èˆ‡æŠ€è¡“æ´è¦‹ï¼ŒåŠ©æ‚¨åœ¨åŠ å¯†è²¨å¹£çš„æ¢ç´¢è·¯ä¸Šï¼Œæ‰¾åˆ°æœ€æ¸…æ™°çš„æ–¹å‘ã€‚">
    <meta name="google-site-verification" content="F1sAja4V6KTk17SiojYOS8UF1GP9-hu8TXI8iVKQ27Y" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Theme Core (Must be first to prevent FOUC) -->
    <script src="../assets/js/theme-core.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        slate: {
                            850: '#15202e', // Custom darker slate
                        }
                    }
                }
            }
        }
    </script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="../assets/css/custom.css">
</head>

<body class="bg-slate-100 text-slate-800">

    <!-- Header -->
    <!-- Header Host -->
    <div id="header-host"></div>

    <main class="py-12 sm:py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

            <!-- Page Header -->
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold tracking-tight text-slate-900 leading-tight font-noto">å¸‚å ´æ´è¦‹
                    (Market Insights)
                </h1>
                <p class="mt-4 text-lg text-slate-600 max-w-3xl mx-auto">
                    é€™è£¡å½™æ•´äº†æ‰€æœ‰çš„å¸‚å ´åˆ†æã€æ ¸å¿ƒè«–è¿°èˆ‡æŠ€è¡“æ´è¦‹ï¼Œå¸Œæœ›èƒ½å¹«åŠ©æ‚¨åœ¨æ¢ç´¢åŠ å¯†è²¨å¹£çš„è·¯ä¸Šï¼Œæ‰¾åˆ°æœ€æ¸…æ™°çš„æ–¹å‘ã€‚
                </p>
            </div>

            <!-- Filter Controls -->
            <div id="filter-controls"
                class="mb-12 p-4 bg-white/80 rounded-2xl shadow-md backdrop-blur-md flex flex-col md:flex-row items-center gap-4">
                <div class="filter-tags flex flex-wrap gap-2 flex-grow">
                    <button class="filter-btn px-4 py-2 text-sm font-semibold rounded-full transition-colors active"
                        data-filter="all">å…¨éƒ¨</button>
                    <button class="filter-btn px-4 py-2 text-sm font-semibold rounded-full transition-colors"
                        data-filter="core">æ ¸å¿ƒè«–è¿°</button>
                    <button class="filter-btn px-4 py-2 text-sm font-semibold rounded-full transition-colors"
                        data-filter="analysis">å¸‚å ´åˆ†æ</button>
                    <button class="filter-btn px-4 py-2 text-sm font-semibold rounded-full transition-colors"
                        data-filter="tech">å‰æ²¿æŠ€è¡“</button>
                </div>
                <div class="flex items-center gap-4 w-full md:w-auto">
                    <select id="sortSelect"
                        class="w-full md:w-auto bg-white border border-slate-300 rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500">
                        <option value="modified-desc" selected>ä¾æœ€å¾Œæ›´æ–° (æ–°åˆ°èˆŠ)</option>
                        <option value="modified-asc">ä¾æœ€å¾Œæ›´æ–° (èˆŠåˆ°æ–°)</option>
                    </select>
                    <input type="text" id="searchInput"
                        class="w-full md:w-auto bg-white border border-slate-300 rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500"
                        placeholder="æœå°‹é—œéµå­—...">
                </div>
            </div>

            <!-- Articles Grid -->
            <div class="archive-grid grid grid-cols-1 gap-8">
                <!-- JS will populate this -->
            </div>
            <div id="no-results" class="text-center py-16 text-slate-500" style="display: none;">
                <p>æ‰¾ä¸åˆ°ç¬¦åˆæ¢ä»¶çš„æ–‡ç«  ğŸ˜…</p>
            </div>
        </div>
    </main>

    <!-- Footer Host -->
    <div id="footer-host"></div>

    <!-- Components -->
    <script src="../assets/js/header-component.js"></script>
    <script src="../assets/js/footer-component.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            new HeaderComponent().init();
            new FooterComponent().init();
        });
    </script>

    <!-- Articles Data -->
    <script src="../assets/js/articles-data.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Fetch articles from the centralized repository
            const articles = window.ArticleRepository ? window.ArticleRepository.all : [];

            if (articles.length === 0) {
                console.error("ArticleRepository not found or empty");
            }

            const filterButtons = document.querySelectorAll('.filter-btn');
            const searchInput = document.getElementById('searchInput');
            const sortSelect = document.getElementById('sortSelect');
            const archiveGrid = document.querySelector('.archive-grid');
            const noResults = document.getElementById('no-results');

            function createArticleCard(article) {
                return `
                <div class="article-card bg-white rounded-2xl shadow-lg overflow-hidden transition-transform duration-300 hover:-translate-y-1 group" data-category="${article.category}" data-published="${article.published}" data-modified="${article.modified}">
                    <a href="../${article.link}" class="block p-8">
                        <div class="text-sm font-semibold ${article.tagColor} uppercase mb-2">${article.tag}</div>
                        <h2 class="card-title text-2xl font-bold text-slate-900 font-noto group-hover:text-orange-600 transition-colors">${article.title}</h2>
                        <p class="card-desc mt-3 text-slate-600 text-sm leading-relaxed">${article.desc}</p>
                        <div class="card-metadata mt-4 text-xs text-slate-500">
                            <p><strong>é—œéµå­—:</strong> <span>${article.keywords}</span></p>
                            <p><strong>æœ€å¾Œæ›´æ–°:</strong> <span>${article.modified}</span></p>
                        </div>
                    </a>
                </div>
            `;
            }

            function renderArticles(filteredArticles) {
                archiveGrid.innerHTML = filteredArticles.map(createArticleCard).join('');
                noResults.style.display = filteredArticles.length === 0 ? 'block' : 'none';
            }

            function sortAndFilterArticles() {
                const selectedCategory = document.querySelector('.filter-btn.active').dataset.filter;
                const searchTerm = searchInput.value.toLowerCase();
                const sortValue = sortSelect.value;

                let filteredArticles = articles.filter(article => {
                    const categoryMatch = selectedCategory === 'all' || article.category === selectedCategory;
                    const searchMatch = (
                        article.title.toLowerCase().includes(searchTerm) ||
                        article.desc.toLowerCase().includes(searchTerm) ||
                        article.keywords.toLowerCase().includes(searchTerm)
                    );
                    return categoryMatch && searchMatch;
                });

                filteredArticles.sort((a, b) => {
                    const dateA = new Date(a[sortValue.split('-')[0]]);
                    const dateB = new Date(b[sortValue.split('-')[0]]);
                    return sortValue.endsWith('-asc') ? dateA - dateB : dateB - dateA;
                });

                renderArticles(filteredArticles);
            }

            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    filterButtons.forEach(btn => btn.classList.remove('active', 'bg-orange-500', 'text-white'));
                    button.classList.add('active', 'bg-orange-500', 'text-white');
                    sortAndFilterArticles();
                });
            });

            searchInput.addEventListener('input', sortAndFilterArticles);
            sortSelect.addEventListener('change', sortAndFilterArticles);

            // Initial render
            sortAndFilterArticles();
        });
    </script>
</body>

</html>